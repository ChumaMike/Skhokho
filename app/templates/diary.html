{% extends 'base.html' %}

{% block title %}Your Diary{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-4">Your Diary</h2>

<form action="{{ url_for('tools.diary') }}" method="post" class="grid gap-4 max-w-xl bg-white p-4 rounded shadow mb-6">
    <label>
        Entry Type:
        <select name="entry_type" required class="border px-4 py-2 w-full">
            <option value="thought">Thought</option>
            <option value="goal">Goal</option>
            <option value="task">Task</option>
        </select>
    </label>
    <label>
        Content:
        <textarea name="content" rows="4" required class="border px-4 py-2 w-full"></textarea>
    </label>
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Add Entry</button>
</form>

{% if entries %}
    <div class="space-y-6">
    {% for date, day_entries in entries.items() %}
        <div class="bg-white p-4 rounded shadow">
            <h3 class="text-lg font-semibold mb-2 border-b pb-1">{{ date }}</h3>
            <ul class="space-y-2">
                {% for entry in day_entries %}
                    <li class="pb-2">
                        <span class="inline-block px-2 py-0.5 rounded text-xs font-bold bg-gray-200 text-gray-700 mr-2">
                            {{ entry.entry_type.title() }}
                        </span>
                        <span>{{ entry.content }}</span>
                        <small class="text-gray-400 block mt-1">{{ entry.timestamp.strftime('%H:%M') }}</small>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endfor %}
    </div>
{% else %}
    <p class="text-gray-600">No diary entries yet, skhokho. Start by adding one above!</p>
{% endif %}
{% endblock %}