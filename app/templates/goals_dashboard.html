{% extends 'base.html' %}

{% block title %}Strategic Objectives{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    
    <div class="flex justify-between items-end mb-8 border-b border-zinc-800 pb-4">
        <div>
            <h2 class="text-3xl font-bold text-white tracking-tight">STRATEGIC <span class="text-red-600">GOALS</span></h2>
            <p class="text-zinc-500 font-mono text-sm mt-1">Define targets. Execute milestones. Track progress.</p>
        </div>
        <button onclick="document.getElementById('create-goal-form').classList.toggle('hidden')" 
                class="bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2 rounded text-sm font-semibold border border-zinc-700 transition">
            + NEW OBJECTIVE
        </button>
    </div>

    <div id="create-goal-form" class="hidden mb-12 bg-zinc-900 border border-red-900/30 p-6 rounded-lg shadow-[0_0_20px_rgba(220,38,38,0.1)]">
        <form method="POST" class="grid gap-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <label class="block">
                    <span class="text-zinc-400 text-xs font-mono uppercase">Objective Title</span>
                    <input type="text" name="title" required class="w-full bg-black border border-zinc-700 text-white p-3 rounded focus:border-red-600 focus:outline-none transition">
                </label>
                <label class="block">
                    <span class="text-zinc-400 text-xs font-mono uppercase">Category</span>
                    <select name="category" class="w-full bg-black border border-zinc-700 text-white p-3 rounded focus:border-red-600 focus:outline-none">
                        <option value="Career">Career Development</option>
                        <option value="Finance">Financial Growth</option>
                        <option value="Health">Physical/Mental Health</option>
                        <option value="Personal">Personal Project</option>
                    </select>
                </label>
            </div>
            <label class="block">
                <span class="text-zinc-400 text-xs font-mono uppercase">Target Date</span>
                <input type="date" name="target_date" class="w-full bg-black border border-zinc-700 text-white p-3 rounded focus:border-red-600 focus:outline-none">
            </label>
            <label class="block">
                <span class="text-zinc-400 text-xs font-mono uppercase">Description (Optional)</span>
                <textarea name="description" rows="2" class="w-full bg-black border border-zinc-700 text-white p-3 rounded focus:border-red-600 focus:outline-none"></textarea>
            </label>
            <div class="flex justify-end">
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded font-bold transition shadow-lg shadow-red-900/20">
                    INITIATE GOAL
                </button>
            </div>
        </form>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for goal in goals %}
        <a href="{{ url_for('goals.view_goal', goal_id=goal.id) }}" class="group block bg-zinc-900 border border-zinc-800 rounded-xl p-6 hover:border-red-600/50 hover:bg-zinc-800/50 transition-all duration-300">
            <div class="flex justify-between items-start mb-4">
                <span class="bg-zinc-800 text-zinc-300 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider group-hover:bg-red-900/30 group-hover:text-red-400 transition">
                    {{ goal.category }}
                </span>
                {% if goal.target_date %}
                <span class="text-zinc-500 text-xs font-mono">
                    DUE: {{ goal.target_date.strftime('%Y-%m-%d') }}
                </span>
                {% endif %}
            </div>
            
            <h3 class="text-xl font-bold text-white mb-2 group-hover:text-red-500 transition">{{ goal.title }}</h3>
            
            <div class="mt-6">
                <div class="flex justify-between text-xs text-zinc-500 mb-1 font-mono">
                    <span>PROGRESS</span>
                    <span>{{ goal.progress }}%</span>
                </div>
                <div class="w-full bg-black rounded-full h-2 border border-zinc-800">
                    <div class="bg-gradient-to-r from-red-800 to-red-500 h-2 rounded-full transition-all duration-500" style="width: {{ goal.progress }}%"></div>
                </div>
            </div>
        </a>
        {% else %}
        <div class="col-span-full text-center py-20 bg-zinc-900/50 border border-dashed border-zinc-800 rounded-xl">
            <p class="text-zinc-500">No active objectives detected.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}